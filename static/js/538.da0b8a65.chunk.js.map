{"version":3,"file":"static/js/538.da0b8a65.chunk.js","mappings":"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","sources":["webpack://my-mind/./src/components/Users/Users.module.css?b9d0","webpack://my-mind/./src/components/Users/UserCard.module.css?dcff","components/Users/UsersFunctionalComponent.jsx","components/Users/UsersContainer.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"usersContainer\":\"Users_usersContainer__CBVb7\",\"pagination\":\"Users_pagination__KY-Z1\",\"pageNumber\":\"Users_pageNumber__1aLj-\",\"active\":\"Users_active__h4E6k\",\"usersList\":\"Users_usersList__WKeP2\",\"showMoreBtn\":\"Users_showMoreBtn__KqGFA\"};","// extracted by mini-css-extract-plugin\nexport default {\"userCard\":\"UserCard_userCard__ihRmo\",\"avatarSection\":\"UserCard_avatarSection__0JBFW\",\"avatar\":\"UserCard_avatar__rVPlw\",\"infoSection\":\"UserCard_infoSection__hwayj\",\"userName\":\"UserCard_userName__PgVTL\",\"userStatus\":\"UserCard_userStatus__4xepr\",\"location\":\"UserCard_location__0ptcn\",\"buttonSection\":\"UserCard_buttonSection__HQ-AC\",\"followBtn\":\"UserCard_followBtn__x8j45\",\"follow\":\"UserCard_follow__v449t\",\"unfollow\":\"UserCard_unfollow__d6+fW\",\"loading\":\"UserCard_loading__Jo1Sy\",\"spin\":\"UserCard_spin__+SlSB\"};","import React from \"react\";\r\nimport m from \"./Users.module.css\";\r\nimport userCardStyles from \"./UserCard.module.css\";\r\nimport xui from \"../../assets/imgs/user-avatar-icon-doodle-style-png.webp\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst UsersFunctionalComponent = (props) => {\r\n  let pagesCount = Math.ceil(props.totalUC / props.pageSize);\r\n  let pages = [];\r\n\r\n  for (let i = 1; i <= pagesCount; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  let slicedPages = [];\r\n  let curPage = props.currentPage;\r\n  if (curPage - 3 < 0) {\r\n    slicedPages = pages.slice(0, 5);\r\n  } else {\r\n    slicedPages = pages.slice(curPage - 3, curPage + 2);\r\n  }\r\n\r\n  return (\r\n    <div className={m.usersContainer}>\r\n      {/* Пагинация */}\r\n      <div className={m.pagination}>\r\n        {slicedPages.map((p) => (\r\n          <span\r\n            key={p}\r\n            onClick={() => props.onPC(p)}\r\n            className={`${m.pageNumber} ${\r\n              props.currentPage === p ? m.active : \"\"\r\n            }`}\r\n          >\r\n            {p}\r\n          </span>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Список пользователей */}\r\n      <div className={m.usersList}>\r\n        {props.users.map((u) => (\r\n          <div key={u.id} className={userCardStyles.userCard}>\r\n            {/* Аватар */}\r\n            <div className={userCardStyles.avatarSection}>\r\n              <NavLink to={\"/profile/\" + u.id}>\r\n                <img\r\n                  src={u.photos.small || xui}\r\n                  alt=\"avatar\"\r\n                  className={userCardStyles.avatar}\r\n                />\r\n              </NavLink>\r\n            </div>\r\n\r\n            {/* Информация */}\r\n            <div className={userCardStyles.infoSection}>\r\n              <h3 className={userCardStyles.userName}>{u.name}</h3>\r\n              <div className={userCardStyles.location}>\r\n                <div>{\"u.location.country\"}</div>\r\n                <div>{\"u.location.city\"}</div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Кнопка Follow/Unfollow */}\r\n            <div className={userCardStyles.buttonSection}>\r\n              {u.isFollowing ? (\r\n                <button\r\n                  className={`${userCardStyles.followBtn} ${userCardStyles.unfollow}`}\r\n                  disabled={\r\n                    !props.isAuth || props.followingInProgress.includes(u.id)\r\n                  }\r\n                  onClick={() =>\r\n                    props.followOrUnfollow(u.id, \"delete\", props.unFollow)\r\n                  }\r\n                >\r\n                  {props.followingInProgress.includes(u.id)\r\n                    ? \"...\"\r\n                    : \"UnFollow\"}\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  className={`${userCardStyles.followBtn} ${userCardStyles.follow}`}\r\n                  disabled={\r\n                    !props.isAuth || props.followingInProgress.includes(u.id)\r\n                  }\r\n                  onClick={() =>\r\n                    props.followOrUnfollow(u.id, \"post\", props.follow)\r\n                  }\r\n                >\r\n                  {props.followingInProgress.includes(u.id) ? \"...\" : \"Follow\"}\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {/* Статус */}\r\n            {u.status && (\r\n              <p className={userCardStyles.userStatus}>{u.status}</p>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Кнопка показать еще */}\r\n      <button className={m.showMoreBtn}>Show more</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UsersFunctionalComponent;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport {\r\n  followAC,\r\n  showUsers,\r\n  unFollowAC,\r\n  setCurPage,\r\n  getUserCountAC,\r\n  toggleIsFetchingAC,\r\n  disabledBtnAC,\r\n  gerUserThunkCreator,\r\n  followOrUnfollow,\r\n} from \"../../reducer/UsersPageReducer\";\r\nimport UsersFunctionalComponent from \"./UsersFunctionalComponent\";\r\nimport Loader from \"../GeneralItems/Loader\";\r\n\r\nconst UsersContainer = () => {\r\n  // контейнерная компонента для связи со стейтом, где я диспатчу методы и данные из стейта для userPage,\r\n  const state = useSelector((state) => state.userPage);\r\n  const stateAuth = useSelector((state) => state.auth);\r\n  const dispatch = useDispatch();\r\n\r\n  const methodsForUser = {\r\n    follow: (userId) => {\r\n      dispatch(followAC(userId));\r\n    },\r\n    unFollow: (userId) => {\r\n      dispatch(unFollowAC(userId));\r\n    },\r\n    show: (users) => {\r\n      dispatch(showUsers(users));\r\n    },\r\n    setPageNumber: (pageNumber) => {\r\n      dispatch(setCurPage(pageNumber));\r\n    },\r\n    getUserCount: (totalCount) => {\r\n      dispatch(getUserCountAC(totalCount));\r\n    },\r\n    toggle: (isFetching) => {\r\n      dispatch(toggleIsFetchingAC(isFetching));\r\n    },\r\n    disabled: (isDisabled) => {\r\n      dispatch(disabledBtnAC(isDisabled));\r\n    },\r\n    thunka: (currentPage, pageSize) => {\r\n      dispatch(gerUserThunkCreator(currentPage, pageSize));\r\n    },\r\n    thunkForSubscribe: (u, deleteOrPost, method) => {\r\n      dispatch(followOrUnfollow(u, deleteOrPost, method));\r\n    },\r\n  };\r\n\r\n  let staticData = {\r\n    pageSize: state.pageSize,\r\n    totalUserCount: state.totalUserCount,\r\n    currentPage: state.currentPage,\r\n    isFetching: state.isFetching,\r\n    isDisabled: state.isDisabled,\r\n    followingInProgress: state.followingInProgress,\r\n    isAuth: stateAuth.isAuth,\r\n  };\r\n  // Navigate\r\n  console.log(\"render userContainer\");\r\n  // Navigate\r\n  return (\r\n    // ретерном возвращаю второй контейнер, в который по пропсам передаю методы и данные нужные только для функциональной компоненты\r\n    <UserApiComponent\r\n      // методы в объекте\r\n      methods={methodsForUser}\r\n      //ниже стат данные\r\n      users={state.users}\r\n      static={staticData}\r\n      currentPage={staticData.currentPage}\r\n      pageSize={staticData.pageSize}\r\n      getUsersThunk={methodsForUser.thunka}\r\n      followOrUnfollow={methodsForUser.thunkForSubscribe}\r\n    />\r\n  );\r\n};\r\n\r\nclass UserApiComponent extends React.Component {\r\n  // сайд эфффект делается только в компонентДидМаунт, аякс запрос на сервак.\r\n  componentDidMount() {\r\n    this.props.getUsersThunk(this.props.currentPage, this.props.pageSize);\r\n  }\r\n  onPageChanged = (p) => {\r\n    this.props.methods.setPageNumber(p);\r\n    this.props.getUsersThunk(p, this.props.pageSize);\r\n  };\r\n  lookThis() {\r\n    console.log(\"this:\", this);\r\n  }\r\n  render() {\r\n    // классовая компонента обязательно рисует с помощью render(), взаимствуя у родителя React.Component и уже в свою очередь отрисовывает чистую функциональную компоненту с передачей нужных пропсов\r\n    return (\r\n      <>\r\n        {this.props.static.isFetching ? <Loader /> : null}\r\n        <UsersFunctionalComponent\r\n          unFollow={this.props.methods.unFollow}\r\n          follow={this.props.methods.follow}\r\n          disabled={this.props.methods.disabled}\r\n          users={this.props.users}\r\n          currentPage={this.props.static.currentPage}\r\n          totalUC={this.props.static.totalUserCount}\r\n          pageSize={this.props.static.pageSize}\r\n          isDisabled={this.props.static.isDisabled}\r\n          isAuth={this.props.static.isAuth}\r\n          followingInProgress={this.props.static.followingInProgress}\r\n          onPC={this.onPageChanged}\r\n          followOrUnfollow={this.props.followOrUnfollow}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UsersContainer;\r\n"],"names":["props","pagesCount","Math","ceil","totalUC","pageSize","pages","i","push","slicedPages","curPage","currentPage","slice","_jsxs","className","m","children","_jsx","map","p","onClick","onPC","concat","users","u","userCardStyles","NavLink","to","id","src","photos","small","xui","alt","name","isFollowing","disabled","isAuth","followingInProgress","includes","followOrUnfollow","unFollow","follow","status","UserApiComponent","React","constructor","arguments","onPageChanged","this","methods","setPageNumber","getUsersThunk","componentDidMount","lookThis","console","log","render","_Fragment","static","isFetching","Loader","UsersFunctionalComponent","totalUserCount","isDisabled","UsersContainer","state","useSelector","userPage","stateAuth","auth","dispatch","useDispatch","methodsForUser","userId","followAC","unFollowAC","show","showUsers","pageNumber","setCurPage","getUserCount","totalCount","getUserCountAC","toggle","toggleIsFetchingAC","disabledBtnAC","thunka","gerUserThunkCreator","thunkForSubscribe","deleteOrPost","method","staticData"],"sourceRoot":""}